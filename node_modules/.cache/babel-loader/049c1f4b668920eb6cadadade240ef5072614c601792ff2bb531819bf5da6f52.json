{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\10211\\\\Desktop\\\\AI Files\\\\oceanEye\\\\src\\\\App.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef, useMemo } from 'react';\nimport './App.css';\nimport TopNavigation from './components/TopNavigation';\nimport DrawingToolbar from './components/DrawingToolbar';\nimport PlaybackControls from './components/PlaybackControls';\nimport SidebarPanel from './components/SidebarPanel';\nimport RouteDataPreview from './components/RouteDataPreview';\nimport { Loader2 } from './components/Icons';\nimport { generateData, generateWeatherData, TYPHOON_DATA } from './utils/dataGenerator';\nimport { useMapInitialization, useTileLayerSwitch, useWeatherLayer, useTyphoonLayer } from './utils/mapHooks';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function App() {\n  _s();\n  const mapContainerRef = useRef(null);\n  const mapInstanceRef = useRef(null);\n  const tileLayerRef = useRef(null);\n  const markersLayerRef = useRef(null);\n  const routeLayerRef = useRef(null);\n  const playbackLayerRef = useRef(null);\n  const importLayerRef = useRef(null);\n  const drawingLayerRef = useRef(null);\n  const typhoonLayerRef = useRef(null);\n  const weatherLayerRef = useRef(null);\n  const fileInputRef = useRef(null);\n  const scriptLoadedRef = useRef(false);\n  const [allItems, setAllItems] = useState([]);\n  const [weatherData, setWeatherData] = useState([]);\n  const [selectedCluster, setSelectedCluster] = useState(null);\n  const [highlightedItemId, setHighlightedItemId] = useState(null);\n  const [libLoaded, setLibLoaded] = useState(false);\n  const [mapReady, setMapReady] = useState(false);\n  const [showWeather, setShowWeather] = useState(false);\n  const [isOfflineMode, setIsOfflineMode] = useState(false);\n  const [playbackState, setPlaybackState] = useState({\n    id: null,\n    index: 0,\n    playing: false\n  });\n  const [previewDataId, setPreviewDataId] = useState(null);\n  const [isDrawingMode, setIsDrawingMode] = useState(false);\n  const [drawnRoutePoints, setDrawnRoutePoints] = useState([]);\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const [isSearchFocused, setIsSearchFocused] = useState(false);\n  const activeAlarms = useMemo(() => allItems.filter(i => i.isAlarm), [allItems]);\n  const filteredItems = useMemo(() => {\n    if (!searchQuery) return [];\n    const lower = searchQuery.toLowerCase();\n    return allItems.filter(item => item.name.toLowerCase().includes(lower) || item.id.toLowerCase().includes(lower)).slice(0, 10);\n  }, [searchQuery, allItems]);\n\n  // 加载天地图库\n  useEffect(() => {\n    if (scriptLoadedRef.current) return;\n    const checkTianditu = () => window.T && typeof window.T.Map === 'function';\n    if (checkTianditu()) {\n      setLibLoaded(true);\n      return;\n    }\n    scriptLoadedRef.current = true;\n\n    // 天地图脚本已在 public/index.html 中加载，这里只需要等待加载完成\n    const interval = setInterval(() => {\n      if (checkTianditu()) {\n        setLibLoaded(true);\n        clearInterval(interval);\n      }\n    }, 100);\n    setTimeout(() => {\n      clearInterval(interval);\n      if (!checkTianditu()) {\n        console.error(\"天地图 API 加载失败\");\n      }\n    }, 10000);\n    return () => clearInterval(interval);\n  }, []);\n  useEffect(() => {\n    setAllItems(generateData());\n    setWeatherData(generateWeatherData());\n  }, []);\n  useMapInitialization(libLoaded, mapContainerRef, mapInstanceRef, tileLayerRef, weatherLayerRef, routeLayerRef, markersLayerRef, typhoonLayerRef, playbackLayerRef, importLayerRef, drawingLayerRef, setMapReady);\n  useTileLayerSwitch(mapInstanceRef, tileLayerRef, isOfflineMode, libLoaded);\n  useWeatherLayer(mapInstanceRef, weatherLayerRef, weatherData, showWeather, libLoaded);\n  useTyphoonLayer(mapInstanceRef, typhoonLayerRef, mapReady, libLoaded);\n\n  // 绘图模式逻辑\n  useEffect(() => {\n    if (!mapInstanceRef.current || !window.T) return;\n    const map = mapInstanceRef.current;\n    const handleMapClick = e => {\n      if (!isDrawingMode) return;\n      setDrawnRoutePoints(prev => [...prev, [e.lnglat.lat, e.lnglat.lng]]);\n    };\n    if (isDrawingMode) {\n      map.addEventListener('click', handleMapClick);\n    } else {\n      map.removeEventListener('click', handleMapClick);\n    }\n    return () => {\n      if (map) map.removeEventListener('click', handleMapClick);\n    };\n  }, [isDrawingMode, libLoaded]);\n\n  // 绘图图层渲染\n  useEffect(() => {\n    if (!drawingLayerRef.current || !window.T) return;\n    const T = window.T;\n    const map = mapInstanceRef.current;\n    const layer = drawingLayerRef.current;\n\n    // 清除旧图层\n    layer.forEach(overlay => map.removeOverLay(overlay));\n    layer.length = 0;\n    if (drawnRoutePoints.length > 0) {\n      const points = drawnRoutePoints.map(p => new T.LngLat(p[1], p[0]));\n      const line = new T.Polyline(points, {\n        color: '#fbbf24',\n        weight: 3,\n        opacity: 0.8,\n        style: 'dashed'\n      });\n      map.addOverLay(line);\n      layer.push(line);\n      drawnRoutePoints.forEach((p, i) => {\n        const circleIcon = new T.Icon({\n          iconUrl: \"data:image/svg+xml;charset=utf-8,\" + encodeURIComponent(`<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"10\" height=\"10\"><circle cx=\"5\" cy=\"5\" r=\"5\" fill=\"#fbbf24\"/></svg>`),\n          iconSize: new T.Point(10, 10),\n          iconAnchor: new T.Point(5, 5)\n        });\n        const marker = new T.Marker(new T.LngLat(p[1], p[0]), {\n          icon: circleIcon\n        });\n        const label = new T.Label({\n          text: `WP ${i + 1}`,\n          position: new T.LngLat(p[1], p[0]),\n          offset: new T.Point(0, -10)\n        });\n        marker.addLabel(label);\n        map.addOverLay(marker);\n        layer.push(marker);\n      });\n    }\n  }, [drawnRoutePoints, libLoaded]);\n\n  // 回放控制\n  useEffect(() => {\n    let timer;\n    if (playbackState.playing && playbackState.id) {\n      timer = setInterval(() => {\n        setPlaybackState(prev => {\n          const ship = allItems.find(s => s.id === prev.id);\n          if (!ship || !ship.historyPath || prev.index >= ship.historyPath.length - 1) {\n            return {\n              ...prev,\n              playing: false\n            };\n          }\n          return {\n            ...prev,\n            index: prev.index + 1\n          };\n        });\n      }, 150);\n    }\n    return () => clearInterval(timer);\n  }, [playbackState.playing, playbackState.id, allItems]);\n\n  // 回放图层\n  useEffect(() => {\n    if (!mapInstanceRef.current || !playbackLayerRef.current || !libLoaded || !window.L) return;\n    const L = window.L;\n    const layer = playbackLayerRef.current;\n    layer.clearLayers();\n    if (playbackState.id) {\n      const ship = allItems.find(s => s.id === playbackState.id);\n      if (ship && ship.historyPath && ship.historyPath.length > 0) {\n        L.polyline(ship.historyPath, {\n          color: '#64748b',\n          weight: 2,\n          dashArray: '4, 4',\n          opacity: 0.5\n        }).addTo(layer);\n        const travelledPath = ship.historyPath.slice(0, playbackState.index + 1);\n        L.polyline(travelledPath, {\n          color: '#0ea5e9',\n          weight: 3,\n          opacity: 1\n        }).addTo(layer);\n        const currentPos = ship.historyPath[playbackState.index];\n        if (currentPos) {\n          const iconHtml = `<div class=\"relative w-8 h-8 flex items-center justify-center bg-blue-600 rounded-full border-2 border-white shadow-lg text-white\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" style=\"transform: rotate(${ship.course}deg)\"><path d=\"M2 21c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1 .6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1\" /><path d=\"M19.38 20A11.6 11.6 0 0 0 21 14l-9-4-9 4c0 2.9.9 5.8 2.5 8\" /></svg></div>`;\n          L.marker(currentPos, {\n            icon: L.divIcon({\n              className: 'playback-marker',\n              html: iconHtml,\n              iconSize: [32, 32],\n              iconAnchor: [16, 16]\n            }),\n            zIndexOffset: 1000\n          }).addTo(layer);\n          if (playbackState.playing) mapInstanceRef.current.panTo(currentPos, {\n            animate: true,\n            duration: 0.1\n          });\n        }\n      }\n    }\n  }, [playbackState, allItems, libLoaded]);\n\n  // 选中航线图层\n  useEffect(() => {\n    if (!mapInstanceRef.current || !routeLayerRef.current || !libLoaded || !window.L) return;\n    const L = window.L;\n    const layer = routeLayerRef.current;\n    layer.clearLayers();\n    if (!highlightedItemId) return;\n    const item = allItems.find(i => i.id === highlightedItemId);\n    if (item && item.type === 'ship' && item.plannedRoute) {\n      L.polyline(item.plannedRoute, {\n        color: '#3b82f6',\n        weight: 2,\n        dashArray: '5, 10',\n        opacity: 0.8\n      }).addTo(layer);\n      if (item.isAlarm) {\n        const currentPos = [item.lat, item.lon];\n        const nearestRoutePoint = item.plannedRoute[0];\n        L.polyline([currentPos, nearestRoutePoint], {\n          color: '#ef4444',\n          weight: 2,\n          opacity: 0.8\n        }).addTo(layer);\n        const midLat = (currentPos[0] + nearestRoutePoint[0]) / 2;\n        const midLon = (currentPos[1] + nearestRoutePoint[1]) / 2;\n        L.marker([midLat, midLon], {\n          icon: L.divIcon({\n            className: 'text-label',\n            html: `<div class=\"bg-red-600 text-white text-[10px] px-1 rounded shadow whitespace-nowrap\">偏离 ${item.xte.toFixed(1)} NM</div>`,\n            iconSize: [80, 20]\n          })\n        }).addTo(layer);\n      }\n    }\n  }, [highlightedItemId, allItems, libLoaded]);\n\n  // 标记图层\n  useEffect(() => {\n    if (!mapInstanceRef.current || !markersLayerRef.current || allItems.length === 0 || !libLoaded || !window.L) return;\n    const L = window.L;\n    const layerGroup = markersLayerRef.current;\n    layerGroup.clearLayers();\n    const clusters = [];\n    const processedIds = new Set();\n    const map = mapInstanceRef.current;\n    try {\n      const points = allItems.map(item => {\n        const point = map.latLngToLayerPoint([item.lat, item.lon]);\n        return {\n          ...item,\n          x: point.x,\n          y: point.y\n        };\n      });\n      for (let i = 0; i < points.length; i++) {\n        if (processedIds.has(points[i].id)) continue;\n        const base = points[i];\n        const cluster = [base];\n        processedIds.add(base.id);\n        for (let j = i + 1; j < points.length; j++) {\n          if (processedIds.has(points[j].id)) continue;\n          if (Math.sqrt(Math.pow(base.x - points[j].x, 2) + Math.pow(base.y - points[j].y, 2)) < 50) {\n            cluster.push(points[j]);\n            processedIds.add(points[j].id);\n          }\n        }\n        clusters.push(cluster);\n      }\n      clusters.forEach(clusterItems => {\n        const isCluster = clusterItems.length > 1;\n        const mainItem = clusterItems[0];\n        const position = [mainItem.lat, mainItem.lon];\n        const isHighlighted = !isCluster && mainItem.id === highlightedItemId;\n        const hasAlarmInCluster = clusterItems.some(i => i.isAlarm);\n        if (playbackState.id === mainItem.id && playbackState.playing) return;\n        let html = '';\n        let zIndexOffset = 0;\n        if (isCluster) {\n          const colorClass = hasAlarmInCluster ? 'bg-red-600 border-red-400 alarm-pulse' : clusterItems.some(i => i.type === 'rig') ? 'bg-orange-600 border-orange-400' : 'bg-blue-600 border-blue-400';\n          html = `<div class=\"flex items-center justify-center w-full h-full rounded-full border-2 text-white font-bold shadow-lg ${colorClass} bg-opacity-90 backdrop-blur-sm\">${clusterItems.length}</div>`;\n        } else {\n          const item = mainItem;\n          const rotation = item.course ? `transform: rotate(${item.course}deg)` : '';\n          const bgClass = item.isAlarm ? 'bg-red-600' : item.type === 'rig' ? 'bg-orange-500' : 'bg-blue-500';\n          const shape = item.type === 'rig' ? `<div class=\"w-full h-full flex items-center justify-center ${bgClass} rounded text-white shadow-md border border-white\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\"><path d=\"M12 2.69l5.66 5.66a8 8 0 1 1-11.31 0z\"></path></svg></div>` : `<div class=\"w-full h-full flex items-center justify-center ${bgClass} rounded-full text-white shadow-md border border-white\" style=\"${rotation}\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"currentColor\" stroke=\"currentColor\" stroke-width=\"0\"><polygon points=\"12 2 22 22 12 18 2 22\"></polygon></svg></div>`;\n          if (item.isAlarm) {\n            html = `<div class=\"relative w-full h-full\"><div class=\"absolute inset-[-8px] bg-red-500 rounded-full animate-ping opacity-75\"></div><div class=\"absolute inset-[-4px] bg-red-500 rounded-full opacity-40\"></div><div class=\"relative w-full h-full\">${shape}</div></div>`;\n            zIndexOffset = 2000;\n          } else if (isHighlighted) {\n            html = `<div class=\"relative w-full h-full\"><div class=\"absolute inset-[-8px] bg-yellow-400 rounded-full animate-ping opacity-75\"></div><div class=\"absolute inset-[-4px] bg-yellow-400 rounded-full opacity-40\"></div><div class=\"relative w-full h-full\">${shape}</div></div>`;\n            zIndexOffset = 1000;\n          } else {\n            html = shape;\n          }\n        }\n        const icon = L.divIcon({\n          html,\n          className: 'custom-marker',\n          iconSize: [24, 24],\n          iconAnchor: [12, 12]\n        });\n        const marker = L.marker(position, {\n          icon,\n          zIndexOffset\n        }).addTo(layerGroup);\n        marker.on('click', () => {\n          if (!isCluster) setHighlightedItemId(mainItem.id);\n          setSelectedCluster({\n            id: isCluster ? `cluster-${mainItem.id}` : mainItem.id,\n            isCluster,\n            items: clusterItems\n          });\n        });\n      });\n    } catch (e) {\n      console.warn(\"Projection error\", e);\n    }\n  }, [allItems, mapReady, libLoaded, highlightedItemId, playbackState]);\n  const handleLocateItem = item => {\n    setHighlightedItemId(item.id);\n    if (mapInstanceRef.current) mapInstanceRef.current.setView([item.lat, item.lon], 12, {\n      animate: true\n    });\n  };\n  const startPlayback = id => setPlaybackState({\n    id,\n    index: 0,\n    playing: true\n  });\n  const stopPlayback = () => setPlaybackState({\n    id: null,\n    index: 0,\n    playing: false\n  });\n  const togglePlayPause = () => setPlaybackState(prev => ({\n    ...prev,\n    playing: !prev.playing\n  }));\n  const handleStartDrawing = () => setIsDrawingMode(!isDrawingMode);\n  const handleClearDrawing = () => setDrawnRoutePoints([]);\n  const handleUndoDrawing = () => setDrawnRoutePoints(prev => prev.slice(0, -1));\n  const handleSaveDrawing = () => {\n    if (drawnRoutePoints.length < 2) {\n      alert(\"请至少绘制两个航路点\");\n      return;\n    }\n    const geoJson = {\n      type: \"Feature\",\n      properties: {\n        name: `Custom Route ${new Date().toLocaleString()}`\n      },\n      geometry: {\n        type: \"LineString\",\n        coordinates: drawnRoutePoints.map(p => [p[1], p[0]])\n      }\n    };\n    const blob = new Blob([JSON.stringify(geoJson, null, 2)], {\n      type: \"application/json\"\n    });\n    const url = URL.createObjectURL(blob);\n    const a = document.createElement('a');\n    a.href = url;\n    a.download = `route_${Date.now()}.json`;\n    a.click();\n    URL.revokeObjectURL(url);\n    alert(`航线已保存 (${drawnRoutePoints.length} WPs)`);\n    setIsDrawingMode(false);\n  };\n  const handleImportClick = () => {\n    var _fileInputRef$current;\n    return (_fileInputRef$current = fileInputRef.current) === null || _fileInputRef$current === void 0 ? void 0 : _fileInputRef$current.click();\n  };\n  const drawImportedRoute = points => {\n    if (!mapInstanceRef.current || !importLayerRef.current || !window.L) return;\n    const L = window.L;\n    importLayerRef.current.clearLayers();\n    L.polyline(points, {\n      color: '#d946ef',\n      weight: 4,\n      dashArray: '10, 5'\n    }).addTo(importLayerRef.current);\n    points.forEach((p, i) => {\n      L.circleMarker(p, {\n        radius: 4,\n        color: '#d946ef',\n        fillColor: '#fff',\n        fillOpacity: 1\n      }).addTo(importLayerRef.current).bindPopup(`WP ${i + 1}: ${p[0].toFixed(4)}, ${p[1].toFixed(4)}`);\n    });\n    mapInstanceRef.current.fitBounds(L.polyline(points).getBounds(), {\n      padding: [50, 50]\n    });\n  };\n  const handleFileImport = event => {\n    const file = event.target.files[0];\n    if (!file) return;\n    const reader = new FileReader();\n    reader.onload = e => {\n      const text = e.target.result;\n      try {\n        let routePoints = [];\n        if (text.trim().startsWith('{') || text.trim().startsWith('[')) {\n          const json = JSON.parse(text);\n          if (Array.isArray(json)) {\n            routePoints = json.map(p => Array.isArray(p) ? p : [p.lat || p.latitude, p.lon || p.lng || p.longitude]);\n          } else if (json.type === 'FeatureCollection' || json.type === 'Feature') {\n            const features = json.type === 'FeatureCollection' ? json.features : [json];\n            const lineString = features.find(f => f.geometry.type === 'LineString');\n            if (lineString) routePoints = lineString.geometry.coordinates.map(c => [c[1], c[0]]);\n          }\n        } else {\n          text.split('\\n').forEach(line => {\n            const cleanLine = line.replace(/['\"]/g, '').trim();\n            if (!cleanLine) return;\n            const parts = cleanLine.split(/[,\\t;]/).map(s => s.trim());\n            const coords = parts.filter(p => !isNaN(parseFloat(p)) && Math.abs(parseFloat(p)) <= 180);\n            if (coords.length >= 2) {\n              const v1 = parseFloat(coords[0]);\n              const v2 = parseFloat(coords[1]);\n              if (v1 >= -90 && v1 <= 90 && v2 >= -180 && v2 <= 180) routePoints.push([v1, v2]);\n            }\n          });\n        }\n        if (routePoints.length > 1) {\n          drawImportedRoute(routePoints);\n          setTimeout(() => alert(`成功导入航线，包含 ${routePoints.length} 个航路点。\\n已自动缩放至航线区域。`), 100);\n        } else {\n          alert(\"未识别到有效的航路点数据。\\n\\n支持格式:\\n1. CSV: lat,lon\\n2. GeoJSON\\n3. JSON 数组\");\n        }\n      } catch (err) {\n        console.error(\"Import failed\", err);\n        alert(\"导入失败：文件格式解析错误\");\n      }\n    };\n    reader.readAsText(file);\n    event.target.value = '';\n  };\n  const handleRefresh = () => {\n    setAllItems(generateData());\n    setWeatherData(generateWeatherData());\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex flex-col h-screen w-full bg-slate-900 text-white font-sans overflow-hidden\",\n    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"file\",\n      ref: fileInputRef,\n      style: {\n        display: 'none'\n      },\n      accept: \".csv,.json,.txt,.geojson\",\n      onChange: handleFileImport\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 367,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(TopNavigation, {\n      activeAlarms: activeAlarms,\n      isOfflineMode: isOfflineMode,\n      setIsOfflineMode: setIsOfflineMode,\n      isDrawingMode: isDrawingMode,\n      handleStartDrawing: handleStartDrawing,\n      handleImportClick: handleImportClick,\n      showWeather: showWeather,\n      setShowWeather: setShowWeather,\n      typhoonData: TYPHOON_DATA,\n      mapInstance: mapInstanceRef.current,\n      handleRefresh: handleRefresh,\n      searchQuery: searchQuery,\n      setSearchQuery: setSearchQuery,\n      isSearchFocused: isSearchFocused,\n      setIsSearchFocused: setIsSearchFocused,\n      filteredItems: filteredItems,\n      handleLocateItem: handleLocateItem\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 369,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex-1 relative w-full h-full bg-slate-900\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"map\",\n        ref: mapContainerRef,\n        className: \"w-full h-full z-0\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 390,\n        columnNumber: 9\n      }, this), !libLoaded && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"absolute inset-0 flex items-center justify-center bg-slate-900 z-50 text-slate-400\",\n        children: [/*#__PURE__*/_jsxDEV(Loader2, {\n          className: \"animate-spin\",\n          size: 32\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 394,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"\\u52A0\\u8F7D\\u4E2D...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 395,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 393,\n        columnNumber: 11\n      }, this), isDrawingMode && /*#__PURE__*/_jsxDEV(DrawingToolbar, {\n        handleUndoDrawing: handleUndoDrawing,\n        handleClearDrawing: handleClearDrawing,\n        handleSaveDrawing: handleSaveDrawing,\n        handleStartDrawing: handleStartDrawing\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 400,\n        columnNumber: 11\n      }, this), previewDataId && /*#__PURE__*/_jsxDEV(RouteDataPreview, {\n        ship: allItems.find(i => i.id === previewDataId),\n        onClose: () => setPreviewDataId(null)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 409,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(PlaybackControls, {\n        playbackState: playbackState,\n        togglePlayPause: togglePlayPause,\n        stopPlayback: stopPlayback\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 415,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(SidebarPanel, {\n        selectedCluster: selectedCluster,\n        setSelectedCluster: setSelectedCluster,\n        handleLocateItem: handleLocateItem,\n        highlightedItemId: highlightedItemId,\n        startPlayback: startPlayback,\n        setPreviewDataId: setPreviewDataId\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 421,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 389,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 366,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"DsyvDfV3DoyttOHhGd9lEArdc1I=\", false, function () {\n  return [useMapInitialization, useTileLayerSwitch, useWeatherLayer, useTyphoonLayer];\n});\n_c = App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useMemo","TopNavigation","DrawingToolbar","PlaybackControls","SidebarPanel","RouteDataPreview","Loader2","generateData","generateWeatherData","TYPHOON_DATA","useMapInitialization","useTileLayerSwitch","useWeatherLayer","useTyphoonLayer","jsxDEV","_jsxDEV","App","_s","mapContainerRef","mapInstanceRef","tileLayerRef","markersLayerRef","routeLayerRef","playbackLayerRef","importLayerRef","drawingLayerRef","typhoonLayerRef","weatherLayerRef","fileInputRef","scriptLoadedRef","allItems","setAllItems","weatherData","setWeatherData","selectedCluster","setSelectedCluster","highlightedItemId","setHighlightedItemId","libLoaded","setLibLoaded","mapReady","setMapReady","showWeather","setShowWeather","isOfflineMode","setIsOfflineMode","playbackState","setPlaybackState","id","index","playing","previewDataId","setPreviewDataId","isDrawingMode","setIsDrawingMode","drawnRoutePoints","setDrawnRoutePoints","searchQuery","setSearchQuery","isSearchFocused","setIsSearchFocused","activeAlarms","filter","i","isAlarm","filteredItems","lower","toLowerCase","item","name","includes","slice","current","checkTianditu","window","T","Map","interval","setInterval","clearInterval","setTimeout","console","error","map","handleMapClick","e","prev","lnglat","lat","lng","addEventListener","removeEventListener","layer","forEach","overlay","removeOverLay","length","points","p","LngLat","line","Polyline","color","weight","opacity","style","addOverLay","push","circleIcon","Icon","iconUrl","encodeURIComponent","iconSize","Point","iconAnchor","marker","Marker","icon","label","Label","text","position","offset","addLabel","timer","ship","find","s","historyPath","L","clearLayers","polyline","dashArray","addTo","travelledPath","currentPos","iconHtml","course","divIcon","className","html","zIndexOffset","panTo","animate","duration","type","plannedRoute","lon","nearestRoutePoint","midLat","midLon","xte","toFixed","layerGroup","clusters","processedIds","Set","point","latLngToLayerPoint","x","y","has","base","cluster","add","j","Math","sqrt","pow","clusterItems","isCluster","mainItem","isHighlighted","hasAlarmInCluster","some","colorClass","rotation","bgClass","shape","on","items","warn","handleLocateItem","setView","startPlayback","stopPlayback","togglePlayPause","handleStartDrawing","handleClearDrawing","handleUndoDrawing","handleSaveDrawing","alert","geoJson","properties","Date","toLocaleString","geometry","coordinates","blob","Blob","JSON","stringify","url","URL","createObjectURL","a","document","createElement","href","download","now","click","revokeObjectURL","handleImportClick","_fileInputRef$current","drawImportedRoute","circleMarker","radius","fillColor","fillOpacity","bindPopup","fitBounds","getBounds","padding","handleFileImport","event","file","target","files","reader","FileReader","onload","result","routePoints","trim","startsWith","json","parse","Array","isArray","latitude","longitude","features","lineString","f","c","split","cleanLine","replace","parts","coords","isNaN","parseFloat","abs","v1","v2","err","readAsText","value","handleRefresh","children","ref","display","accept","onChange","fileName","_jsxFileName","lineNumber","columnNumber","typhoonData","mapInstance","size","onClose","_c","$RefreshReg$"],"sources":["C:/Users/10211/Desktop/AI Files/oceanEye/src/App.js"],"sourcesContent":["import React, { useState, useEffect, useRef, useMemo } from 'react';\r\nimport './App.css';\r\nimport TopNavigation from './components/TopNavigation';\r\nimport DrawingToolbar from './components/DrawingToolbar';\r\nimport PlaybackControls from './components/PlaybackControls';\r\nimport SidebarPanel from './components/SidebarPanel';\r\nimport RouteDataPreview from './components/RouteDataPreview';\r\nimport { Loader2 } from './components/Icons';\r\nimport { generateData, generateWeatherData, TYPHOON_DATA } from './utils/dataGenerator';\r\nimport { \r\n  useMapInitialization, \r\n  useTileLayerSwitch, \r\n  useWeatherLayer, \r\n  useTyphoonLayer \r\n} from './utils/mapHooks';\r\n\r\nexport default function App() {\r\n  const mapContainerRef = useRef(null);\r\n  const mapInstanceRef = useRef(null);\r\n  const tileLayerRef = useRef(null);\r\n  const markersLayerRef = useRef(null);\r\n  const routeLayerRef = useRef(null);\r\n  const playbackLayerRef = useRef(null);\r\n  const importLayerRef = useRef(null);\r\n  const drawingLayerRef = useRef(null);\r\n  const typhoonLayerRef = useRef(null);\r\n  const weatherLayerRef = useRef(null);\r\n  const fileInputRef = useRef(null);\r\n  const scriptLoadedRef = useRef(false);\r\n\r\n  const [allItems, setAllItems] = useState([]);\r\n  const [weatherData, setWeatherData] = useState([]);\r\n  const [selectedCluster, setSelectedCluster] = useState(null);\r\n  const [highlightedItemId, setHighlightedItemId] = useState(null); \r\n  const [libLoaded, setLibLoaded] = useState(false);\r\n  const [mapReady, setMapReady] = useState(false);\r\n  const [showWeather, setShowWeather] = useState(false);\r\n  const [isOfflineMode, setIsOfflineMode] = useState(false);\r\n  const [playbackState, setPlaybackState] = useState({ id: null, index: 0, playing: false });\r\n  const [previewDataId, setPreviewDataId] = useState(null);\r\n  const [isDrawingMode, setIsDrawingMode] = useState(false);\r\n  const [drawnRoutePoints, setDrawnRoutePoints] = useState([]);\r\n  const [searchQuery, setSearchQuery] = useState(\"\");\r\n  const [isSearchFocused, setIsSearchFocused] = useState(false);\r\n\r\n  const activeAlarms = useMemo(() => allItems.filter(i => i.isAlarm), [allItems]);\r\n  const filteredItems = useMemo(() => {\r\n    if (!searchQuery) return [];\r\n    const lower = searchQuery.toLowerCase();\r\n    return allItems.filter(item => \r\n      item.name.toLowerCase().includes(lower) || \r\n      item.id.toLowerCase().includes(lower)\r\n    ).slice(0, 10);\r\n  }, [searchQuery, allItems]);\r\n\r\n  // 加载天地图库\r\n  useEffect(() => {\r\n    if (scriptLoadedRef.current) return;\r\n    const checkTianditu = () => window.T && typeof window.T.Map === 'function';\r\n    if (checkTianditu()) { setLibLoaded(true); return; }\r\n    scriptLoadedRef.current = true;\r\n    \r\n    // 天地图脚本已在 public/index.html 中加载，这里只需要等待加载完成\r\n    const interval = setInterval(() => {\r\n      if (checkTianditu()) { \r\n        setLibLoaded(true); \r\n        clearInterval(interval); \r\n      }\r\n    }, 100);\r\n    \r\n    setTimeout(() => {\r\n      clearInterval(interval);\r\n      if (!checkTianditu()) {\r\n        console.error(\"天地图 API 加载失败\");\r\n      }\r\n    }, 10000);\r\n    \r\n    return () => clearInterval(interval);\r\n  }, []);\r\n\r\n  useEffect(() => { setAllItems(generateData()); setWeatherData(generateWeatherData()); }, []);\r\n\r\n  useMapInitialization(libLoaded, mapContainerRef, mapInstanceRef, tileLayerRef, weatherLayerRef, routeLayerRef, markersLayerRef, typhoonLayerRef, playbackLayerRef, importLayerRef, drawingLayerRef, setMapReady);\r\n  useTileLayerSwitch(mapInstanceRef, tileLayerRef, isOfflineMode, libLoaded);\r\n  useWeatherLayer(mapInstanceRef, weatherLayerRef, weatherData, showWeather, libLoaded);\r\n  useTyphoonLayer(mapInstanceRef, typhoonLayerRef, mapReady, libLoaded);\r\n\r\n  // 绘图模式逻辑\r\n  useEffect(() => {\r\n    if (!mapInstanceRef.current || !window.T) return;\r\n    const map = mapInstanceRef.current;\r\n    const handleMapClick = (e) => {\r\n      if (!isDrawingMode) return;\r\n      setDrawnRoutePoints(prev => [...prev, [e.lnglat.lat, e.lnglat.lng]]);\r\n    };\r\n    if (isDrawingMode) {\r\n      map.addEventListener('click', handleMapClick);\r\n    } else {\r\n      map.removeEventListener('click', handleMapClick);\r\n    }\r\n    return () => { \r\n      if (map) map.removeEventListener('click', handleMapClick); \r\n    };\r\n  }, [isDrawingMode, libLoaded]);\r\n\r\n  // 绘图图层渲染\r\n  useEffect(() => {\r\n    if (!drawingLayerRef.current || !window.T) return;\r\n    const T = window.T;\r\n    const map = mapInstanceRef.current;\r\n    const layer = drawingLayerRef.current;\r\n    \r\n    // 清除旧图层\r\n    layer.forEach(overlay => map.removeOverLay(overlay));\r\n    layer.length = 0;\r\n    \r\n    if (drawnRoutePoints.length > 0) {\r\n      const points = drawnRoutePoints.map(p => new T.LngLat(p[1], p[0]));\r\n      const line = new T.Polyline(points, { \r\n        color: '#fbbf24', \r\n        weight: 3, \r\n        opacity: 0.8,\r\n        style: 'dashed'\r\n      });\r\n      map.addOverLay(line);\r\n      layer.push(line);\r\n      \r\n      drawnRoutePoints.forEach((p, i) => {\r\n        const circleIcon = new T.Icon({\r\n          iconUrl: \"data:image/svg+xml;charset=utf-8,\" + encodeURIComponent(`<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"10\" height=\"10\"><circle cx=\"5\" cy=\"5\" r=\"5\" fill=\"#fbbf24\"/></svg>`),\r\n          iconSize: new T.Point(10, 10),\r\n          iconAnchor: new T.Point(5, 5)\r\n        });\r\n        const marker = new T.Marker(new T.LngLat(p[1], p[0]), { icon: circleIcon });\r\n        const label = new T.Label({ text: `WP ${i+1}`, position: new T.LngLat(p[1], p[0]), offset: new T.Point(0, -10) });\r\n        marker.addLabel(label);\r\n        map.addOverLay(marker);\r\n        layer.push(marker);\r\n      });\r\n    }\r\n  }, [drawnRoutePoints, libLoaded]);\r\n\r\n  // 回放控制\r\n  useEffect(() => {\r\n    let timer;\r\n    if (playbackState.playing && playbackState.id) {\r\n      timer = setInterval(() => {\r\n        setPlaybackState(prev => {\r\n          const ship = allItems.find(s => s.id === prev.id);\r\n          if (!ship || !ship.historyPath || prev.index >= ship.historyPath.length - 1) {\r\n            return { ...prev, playing: false };\r\n          }\r\n          return { ...prev, index: prev.index + 1 };\r\n        });\r\n      }, 150);\r\n    }\r\n    return () => clearInterval(timer);\r\n  }, [playbackState.playing, playbackState.id, allItems]);\r\n\r\n  // 回放图层\r\n  useEffect(() => {\r\n    if (!mapInstanceRef.current || !playbackLayerRef.current || !libLoaded || !window.L) return;\r\n    const L = window.L; const layer = playbackLayerRef.current; layer.clearLayers();\r\n    if (playbackState.id) {\r\n      const ship = allItems.find(s => s.id === playbackState.id);\r\n      if (ship && ship.historyPath && ship.historyPath.length > 0) {\r\n        L.polyline(ship.historyPath, { color: '#64748b', weight: 2, dashArray: '4, 4', opacity: 0.5 }).addTo(layer);\r\n        const travelledPath = ship.historyPath.slice(0, playbackState.index + 1);\r\n        L.polyline(travelledPath, { color: '#0ea5e9', weight: 3, opacity: 1 }).addTo(layer);\r\n        const currentPos = ship.historyPath[playbackState.index];\r\n        if (currentPos) {\r\n          const iconHtml = `<div class=\"relative w-8 h-8 flex items-center justify-center bg-blue-600 rounded-full border-2 border-white shadow-lg text-white\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" style=\"transform: rotate(${ship.course}deg)\"><path d=\"M2 21c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1 .6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1\" /><path d=\"M19.38 20A11.6 11.6 0 0 0 21 14l-9-4-9 4c0 2.9.9 5.8 2.5 8\" /></svg></div>`;\r\n          L.marker(currentPos, {\r\n            icon: L.divIcon({ className: 'playback-marker', html: iconHtml, iconSize: [32, 32], iconAnchor: [16, 16] }),\r\n            zIndexOffset: 1000\r\n          }).addTo(layer);\r\n          if (playbackState.playing) mapInstanceRef.current.panTo(currentPos, { animate: true, duration: 0.1 });\r\n        }\r\n      }\r\n    }\r\n  }, [playbackState, allItems, libLoaded]);\r\n\r\n  // 选中航线图层\r\n  useEffect(() => {\r\n    if (!mapInstanceRef.current || !routeLayerRef.current || !libLoaded || !window.L) return;\r\n    const L = window.L; const layer = routeLayerRef.current; layer.clearLayers();\r\n    if (!highlightedItemId) return;\r\n    const item = allItems.find(i => i.id === highlightedItemId);\r\n    if (item && item.type === 'ship' && item.plannedRoute) {\r\n      L.polyline(item.plannedRoute, { color: '#3b82f6', weight: 2, dashArray: '5, 10', opacity: 0.8 }).addTo(layer);\r\n      if (item.isAlarm) {\r\n        const currentPos = [item.lat, item.lon];\r\n        const nearestRoutePoint = item.plannedRoute[0]; \r\n        L.polyline([currentPos, nearestRoutePoint], { color: '#ef4444', weight: 2, opacity: 0.8 }).addTo(layer);\r\n        const midLat = (currentPos[0] + nearestRoutePoint[0])/2;\r\n        const midLon = (currentPos[1] + nearestRoutePoint[1])/2;\r\n        L.marker([midLat, midLon], { \r\n          icon: L.divIcon({ \r\n            className: 'text-label', \r\n            html: `<div class=\"bg-red-600 text-white text-[10px] px-1 rounded shadow whitespace-nowrap\">偏离 ${item.xte.toFixed(1)} NM</div>`, \r\n            iconSize: [80, 20] \r\n          }) \r\n        }).addTo(layer);\r\n      }\r\n    }\r\n  }, [highlightedItemId, allItems, libLoaded]);\r\n\r\n  // 标记图层\r\n  useEffect(() => {\r\n    if (!mapInstanceRef.current || !markersLayerRef.current || allItems.length === 0 || !libLoaded || !window.L) return;\r\n    const L = window.L; const layerGroup = markersLayerRef.current; layerGroup.clearLayers();\r\n    const clusters = []; const processedIds = new Set(); const map = mapInstanceRef.current;\r\n    \r\n    try {\r\n      const points = allItems.map(item => {\r\n        const point = map.latLngToLayerPoint([item.lat, item.lon]);\r\n        return { ...item, x: point.x, y: point.y };\r\n      });\r\n      \r\n      for (let i = 0; i < points.length; i++) {\r\n        if (processedIds.has(points[i].id)) continue;\r\n        const base = points[i]; const cluster = [base]; processedIds.add(base.id);\r\n        for (let j = i + 1; j < points.length; j++) {\r\n          if (processedIds.has(points[j].id)) continue;\r\n          if (Math.sqrt(Math.pow(base.x - points[j].x, 2) + Math.pow(base.y - points[j].y, 2)) < 50) { \r\n            cluster.push(points[j]); processedIds.add(points[j].id); \r\n          }\r\n        }\r\n        clusters.push(cluster);\r\n      }\r\n\r\n      clusters.forEach(clusterItems => {\r\n        const isCluster = clusterItems.length > 1;\r\n        const mainItem = clusterItems[0];\r\n        const position = [mainItem.lat, mainItem.lon];\r\n        const isHighlighted = !isCluster && mainItem.id === highlightedItemId;\r\n        const hasAlarmInCluster = clusterItems.some(i => i.isAlarm);\r\n        if (playbackState.id === mainItem.id && playbackState.playing) return; \r\n\r\n        let html = '';\r\n        let zIndexOffset = 0;\r\n\r\n        if (isCluster) {\r\n          const colorClass = hasAlarmInCluster ? 'bg-red-600 border-red-400 alarm-pulse' : (clusterItems.some(i=>i.type==='rig') ? 'bg-orange-600 border-orange-400' : 'bg-blue-600 border-blue-400');\r\n          html = `<div class=\"flex items-center justify-center w-full h-full rounded-full border-2 text-white font-bold shadow-lg ${colorClass} bg-opacity-90 backdrop-blur-sm\">${clusterItems.length}</div>`;\r\n        } else {\r\n          const item = mainItem;\r\n          const rotation = item.course ? `transform: rotate(${item.course}deg)` : '';\r\n          const bgClass = item.isAlarm ? 'bg-red-600' : (item.type === 'rig' ? 'bg-orange-500' : 'bg-blue-500');\r\n          const shape = item.type === 'rig' \r\n            ? `<div class=\"w-full h-full flex items-center justify-center ${bgClass} rounded text-white shadow-md border border-white\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\"><path d=\"M12 2.69l5.66 5.66a8 8 0 1 1-11.31 0z\"></path></svg></div>`\r\n            : `<div class=\"w-full h-full flex items-center justify-center ${bgClass} rounded-full text-white shadow-md border border-white\" style=\"${rotation}\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"currentColor\" stroke=\"currentColor\" stroke-width=\"0\"><polygon points=\"12 2 22 22 12 18 2 22\"></polygon></svg></div>`;\r\n\r\n          if (item.isAlarm) {\r\n            html = `<div class=\"relative w-full h-full\"><div class=\"absolute inset-[-8px] bg-red-500 rounded-full animate-ping opacity-75\"></div><div class=\"absolute inset-[-4px] bg-red-500 rounded-full opacity-40\"></div><div class=\"relative w-full h-full\">${shape}</div></div>`;\r\n            zIndexOffset = 2000;\r\n          } else if (isHighlighted) {\r\n            html = `<div class=\"relative w-full h-full\"><div class=\"absolute inset-[-8px] bg-yellow-400 rounded-full animate-ping opacity-75\"></div><div class=\"absolute inset-[-4px] bg-yellow-400 rounded-full opacity-40\"></div><div class=\"relative w-full h-full\">${shape}</div></div>`;\r\n            zIndexOffset = 1000;\r\n          } else {\r\n            html = shape;\r\n          }\r\n        }\r\n\r\n        const icon = L.divIcon({ html, className: 'custom-marker', iconSize: [24, 24], iconAnchor: [12, 12] });\r\n        const marker = L.marker(position, { icon, zIndexOffset }).addTo(layerGroup);\r\n        marker.on('click', () => {\r\n          if (!isCluster) setHighlightedItemId(mainItem.id);\r\n          setSelectedCluster({ id: isCluster ? `cluster-${mainItem.id}` : mainItem.id, isCluster, items: clusterItems });\r\n        });\r\n      });\r\n    } catch (e) {\r\n      console.warn(\"Projection error\", e);\r\n    }\r\n  }, [allItems, mapReady, libLoaded, highlightedItemId, playbackState]);\r\n\r\n  const handleLocateItem = (item) => {\r\n    setHighlightedItemId(item.id);\r\n    if (mapInstanceRef.current) mapInstanceRef.current.setView([item.lat, item.lon], 12, { animate: true });\r\n  };\r\n\r\n  const startPlayback = (id) => setPlaybackState({ id, index: 0, playing: true });\r\n  const stopPlayback = () => setPlaybackState({ id: null, index: 0, playing: false });\r\n  const togglePlayPause = () => setPlaybackState(prev => ({ ...prev, playing: !prev.playing }));\r\n\r\n  const handleStartDrawing = () => setIsDrawingMode(!isDrawingMode);\r\n  const handleClearDrawing = () => setDrawnRoutePoints([]);\r\n  const handleUndoDrawing = () => setDrawnRoutePoints(prev => prev.slice(0, -1));\r\n  const handleSaveDrawing = () => {\r\n    if (drawnRoutePoints.length < 2) { alert(\"请至少绘制两个航路点\"); return; }\r\n    const geoJson = {\r\n      type: \"Feature\",\r\n      properties: { name: `Custom Route ${new Date().toLocaleString()}` },\r\n      geometry: { type: \"LineString\", coordinates: drawnRoutePoints.map(p => [p[1], p[0]]) }\r\n    };\r\n    const blob = new Blob([JSON.stringify(geoJson, null, 2)], {type: \"application/json\"});\r\n    const url = URL.createObjectURL(blob);\r\n    const a = document.createElement('a');\r\n    a.href = url; a.download = `route_${Date.now()}.json`; a.click();\r\n    URL.revokeObjectURL(url);\r\n    alert(`航线已保存 (${drawnRoutePoints.length} WPs)`);\r\n    setIsDrawingMode(false);\r\n  };\r\n\r\n  const handleImportClick = () => fileInputRef.current?.click();\r\n\r\n  const drawImportedRoute = (points) => {\r\n    if (!mapInstanceRef.current || !importLayerRef.current || !window.L) return;\r\n    const L = window.L;\r\n    importLayerRef.current.clearLayers();\r\n    L.polyline(points, { color: '#d946ef', weight: 4, dashArray: '10, 5' }).addTo(importLayerRef.current); \r\n    points.forEach((p, i) => {\r\n      L.circleMarker(p, { radius: 4, color: '#d946ef', fillColor: '#fff', fillOpacity: 1 })\r\n        .addTo(importLayerRef.current).bindPopup(`WP ${i+1}: ${p[0].toFixed(4)}, ${p[1].toFixed(4)}`);\r\n    });\r\n    mapInstanceRef.current.fitBounds(L.polyline(points).getBounds(), { padding: [50, 50] });\r\n  };\r\n\r\n  const handleFileImport = (event) => {\r\n    const file = event.target.files[0];\r\n    if (!file) return;\r\n    const reader = new FileReader();\r\n    reader.onload = (e) => {\r\n      const text = e.target.result;\r\n      try {\r\n        let routePoints = [];\r\n        if (text.trim().startsWith('{') || text.trim().startsWith('[')) {\r\n          const json = JSON.parse(text);\r\n          if (Array.isArray(json)) {\r\n            routePoints = json.map(p => Array.isArray(p) ? p : [p.lat || p.latitude, p.lon || p.lng || p.longitude]);\r\n          } else if (json.type === 'FeatureCollection' || json.type === 'Feature') {\r\n            const features = json.type === 'FeatureCollection' ? json.features : [json];\r\n            const lineString = features.find(f => f.geometry.type === 'LineString');\r\n            if (lineString) routePoints = lineString.geometry.coordinates.map(c => [c[1], c[0]]);\r\n          }\r\n        } else {\r\n          text.split('\\n').forEach(line => {\r\n            const cleanLine = line.replace(/['\"]/g, '').trim();\r\n            if (!cleanLine) return;\r\n            const parts = cleanLine.split(/[,\\t;]/).map(s => s.trim());\r\n            const coords = parts.filter(p => !isNaN(parseFloat(p)) && Math.abs(parseFloat(p)) <= 180);\r\n            if (coords.length >= 2) {\r\n              const v1 = parseFloat(coords[0]); const v2 = parseFloat(coords[1]);\r\n              if (v1 >= -90 && v1 <= 90 && v2 >= -180 && v2 <= 180) routePoints.push([v1, v2]);\r\n            }\r\n          });\r\n        }\r\n        if (routePoints.length > 1) {\r\n          drawImportedRoute(routePoints);\r\n          setTimeout(() => alert(`成功导入航线，包含 ${routePoints.length} 个航路点。\\n已自动缩放至航线区域。`), 100);\r\n        } else {\r\n          alert(\"未识别到有效的航路点数据。\\n\\n支持格式:\\n1. CSV: lat,lon\\n2. GeoJSON\\n3. JSON 数组\");\r\n        }\r\n      } catch (err) {\r\n        console.error(\"Import failed\", err);\r\n        alert(\"导入失败：文件格式解析错误\");\r\n      }\r\n    };\r\n    reader.readAsText(file);\r\n    event.target.value = '';\r\n  };\r\n\r\n  const handleRefresh = () => { setAllItems(generateData()); setWeatherData(generateWeatherData()); };\r\n\r\n  return (\r\n    <div className=\"flex flex-col h-screen w-full bg-slate-900 text-white font-sans overflow-hidden\">\r\n      <input type=\"file\" ref={fileInputRef} style={{ display: 'none' }} accept=\".csv,.json,.txt,.geojson\" onChange={handleFileImport} />\r\n      \r\n      <TopNavigation \r\n        activeAlarms={activeAlarms}\r\n        isOfflineMode={isOfflineMode}\r\n        setIsOfflineMode={setIsOfflineMode}\r\n        isDrawingMode={isDrawingMode}\r\n        handleStartDrawing={handleStartDrawing}\r\n        handleImportClick={handleImportClick}\r\n        showWeather={showWeather}\r\n        setShowWeather={setShowWeather}\r\n        typhoonData={TYPHOON_DATA}\r\n        mapInstance={mapInstanceRef.current}\r\n        handleRefresh={handleRefresh}\r\n        searchQuery={searchQuery}\r\n        setSearchQuery={setSearchQuery}\r\n        isSearchFocused={isSearchFocused}\r\n        setIsSearchFocused={setIsSearchFocused}\r\n        filteredItems={filteredItems}\r\n        handleLocateItem={handleLocateItem}\r\n      />\r\n\r\n      <div className=\"flex-1 relative w-full h-full bg-slate-900\">\r\n        <div id=\"map\" ref={mapContainerRef} className=\"w-full h-full z-0\" />\r\n        \r\n        {!libLoaded && (\r\n          <div className=\"absolute inset-0 flex items-center justify-center bg-slate-900 z-50 text-slate-400\">\r\n            <Loader2 className=\"animate-spin\" size={32}/>\r\n            <span>加载中...</span>\r\n          </div>\r\n        )}\r\n\r\n        {isDrawingMode && (\r\n          <DrawingToolbar \r\n            handleUndoDrawing={handleUndoDrawing}\r\n            handleClearDrawing={handleClearDrawing}\r\n            handleSaveDrawing={handleSaveDrawing}\r\n            handleStartDrawing={handleStartDrawing}\r\n          />\r\n        )}\r\n\r\n        {previewDataId && (\r\n          <RouteDataPreview \r\n            ship={allItems.find(i => i.id === previewDataId)} \r\n            onClose={() => setPreviewDataId(null)} \r\n          />\r\n        )}\r\n\r\n        <PlaybackControls \r\n          playbackState={playbackState}\r\n          togglePlayPause={togglePlayPause}\r\n          stopPlayback={stopPlayback}\r\n        />\r\n\r\n        <SidebarPanel \r\n          selectedCluster={selectedCluster}\r\n          setSelectedCluster={setSelectedCluster}\r\n          handleLocateItem={handleLocateItem}\r\n          highlightedItemId={highlightedItemId}\r\n          startPlayback={startPlayback}\r\n          setPreviewDataId={setPreviewDataId}\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}