{"ast":null,"code":"var _s = $RefreshSig$(),\n  _s2 = $RefreshSig$(),\n  _s3 = $RefreshSig$(),\n  _s4 = $RefreshSig$();\nimport { useEffect } from 'react';\nimport { TILE_SOURCES, generateWindCirclePoints } from './mapUtils';\nimport { TYPHOON_DATA } from './dataGenerator';\nexport const useMapInitialization = (libLoaded, mapContainerRef, mapInstanceRef, tileLayerRef, weatherLayerRef, routeLayerRef, markersLayerRef, typhoonLayerRef, playbackLayerRef, importLayerRef, drawingLayerRef, setMapReady) => {\n  _s();\n  useEffect(() => {\n    if (!libLoaded || !mapContainerRef.current) return;\n    if (mapInstanceRef.current) return;\n    const T = window.T;\n    if (!T || typeof T.Map !== 'function') return;\n    try {\n      // 创建天地图实例\n      const map = new T.Map(mapContainerRef.current);\n      map.centerAndZoom(new T.LngLat(105, 35), 4);\n\n      // 启用所有交互功能\n      map.enableDrag();\n      map.enableScrollWheelZoom();\n      map.enableDoubleClickZoom();\n      map.enableKeyboard();\n      map.enableInertia();\n      map.enableContinuousZoom();\n      map.enableAutoResize();\n\n      // 确保地图容器可以接收鼠标事件\n      if (mapContainerRef.current) {\n        mapContainerRef.current.style.cursor = 'grab';\n        mapContainerRef.current.style.pointerEvents = 'auto';\n      }\n\n      // 创建图层对象（用数组模拟图层组）\n      const weatherLayer = [];\n      const routeLayer = [];\n      const typhoonLayer = [];\n      const markersLayer = [];\n      const playbackLayer = [];\n      const importLayer = [];\n      const drawingLayer = [];\n      weatherLayerRef.current = weatherLayer;\n      routeLayerRef.current = routeLayer;\n      markersLayerRef.current = markersLayer;\n      typhoonLayerRef.current = typhoonLayer;\n      playbackLayerRef.current = playbackLayer;\n      importLayerRef.current = importLayer;\n      drawingLayerRef.current = drawingLayer;\n      tileLayerRef.current = {\n        type: 'tianditu',\n        map\n      };\n      mapInstanceRef.current = map;\n\n      // 准格尔盆地\n      const junggarCoords = [new T.LngLat(87.5, 48.2), new T.LngLat(89.0, 47.8), new T.LngLat(90.2, 47.0), new T.LngLat(90.8, 46.0), new T.LngLat(91.0, 45.0), new T.LngLat(90.0, 44.2), new T.LngLat(88.5, 43.8), new T.LngLat(87.0, 43.5), new T.LngLat(85.5, 43.8), new T.LngLat(84.0, 44.5), new T.LngLat(83.0, 45.5), new T.LngLat(83.5, 46.5), new T.LngLat(84.8, 47.2), new T.LngLat(86.0, 47.8)];\n      const polygon = new T.Polygon(junggarCoords, {\n        color: '#fbbf24',\n        weight: 2,\n        opacity: 0.8,\n        fillColor: '#fbbf24',\n        fillOpacity: 0.15\n      });\n      map.addOverLay(polygon);\n\n      // 监听地图移动事件\n      map.addEventListener('moveend', () => setMapReady(prev => !prev));\n      setMapReady(true);\n    } catch (err) {\n      console.error(\"Map initialization failed\", err);\n    }\n    return () => {\n      if (mapInstanceRef.current) {\n        mapInstanceRef.current.clearOverLays();\n        mapInstanceRef.current = null;\n      }\n    };\n  }, [libLoaded]);\n};\n_s(useMapInitialization, \"OD7bBpZva5O2jO+Puf00hKivP7c=\");\nexport const useTileLayerSwitch = (mapInstanceRef, tileLayerRef, isOfflineMode, libLoaded) => {\n  _s2();\n  useEffect(() => {\n    if (!mapInstanceRef.current || !tileLayerRef.current || !libLoaded) return;\n    if (!window.L || typeof window.L.tileLayer !== 'function') return;\n    const L = window.L;\n    const map = mapInstanceRef.current;\n    const source = isOfflineMode ? TILE_SOURCES.OFFLINE : TILE_SOURCES.ONLINE;\n    if (tileLayerRef.current) {\n      map.removeLayer(tileLayerRef.current);\n    }\n    const newTileLayer = L.tileLayer(source.url, {\n      attribution: source.attribution,\n      maxZoom: 19\n    }).addTo(map);\n    newTileLayer.bringToBack();\n    tileLayerRef.current = newTileLayer;\n  }, [isOfflineMode, libLoaded]);\n};\n_s2(useTileLayerSwitch, \"OD7bBpZva5O2jO+Puf00hKivP7c=\");\nexport const useWeatherLayer = (mapInstanceRef, weatherLayerRef, weatherData, showWeather, libLoaded) => {\n  _s3();\n  useEffect(() => {\n    if (!mapInstanceRef.current || !weatherLayerRef.current || !libLoaded) return;\n    if (!window.T) return;\n    const T = window.T;\n    const map = mapInstanceRef.current;\n    const layer = weatherLayerRef.current;\n\n    // 清除旧的图层\n    layer.forEach(marker => map.removeOverLay(marker));\n    layer.length = 0;\n    if (!showWeather) return;\n    weatherData.forEach(w => {\n      let color = '#a3e635';\n      if (w.windSpeed >= 15) color = '#facc15';\n      if (w.windSpeed >= 25) color = '#f87171';\n      let weatherIconSvg = w.type === 'Clear' ? `<circle cx=\"12\" cy=\"12\" r=\"6\" fill=\"${color}\" fill-opacity=\"0.2\" stroke=\"${color}\" stroke-width=\"2\"/>` : `<path d=\"M17.5 19c0-1.7-1.3-3-3-3h-11c-1.7 0-3 1.3-3 3s1.3 3 3 3h11c1.7 0 3-1.3 3-3z\" fill=\"${color}\" fill-opacity=\"0.4\"/>`;\n      const html = `<div class=\"relative w-10 h-10 flex items-center justify-center\"><div style=\"transform: rotate(${w.windDir}deg); transform-origin: center;\" class=\"absolute inset-0 flex items-center justify-center opacity-60\"><svg width=\"40\" height=\"40\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"${color}\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><line x1=\"12\" y1=\"19\" x2=\"12\" y2=\"5\"></line><polyline points=\"5 12 12 5 19 12\"></polyline></svg></div><div class=\"absolute bottom-0 right-0 bg-slate-900/80 text-[8px] px-1 rounded text-white font-mono\">${w.windSpeed}</div><div class=\"absolute top-0 left-0 w-4 h-4\"><svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">${weatherIconSvg}</svg></div></div>`;\n      const icon = new T.Icon({\n        iconUrl: \"data:image/svg+xml;charset=utf-8,\" + encodeURIComponent(`<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"40\" height=\"40\"><foreignObject width=\"40\" height=\"40\">${html}</foreignObject></svg>`),\n        iconSize: new T.Point(40, 40),\n        iconAnchor: new T.Point(20, 20)\n      });\n      const marker = new T.Marker(new T.LngLat(w.lon, w.lat), {\n        icon\n      });\n      map.addOverLay(marker);\n      layer.push(marker);\n    });\n  }, [libLoaded, weatherData, showWeather]);\n};\n_s3(useWeatherLayer, \"OD7bBpZva5O2jO+Puf00hKivP7c=\");\nexport const useTyphoonLayer = (mapInstanceRef, typhoonLayerRef, mapReady, libLoaded) => {\n  _s4();\n  useEffect(() => {\n    if (!mapInstanceRef.current || !typhoonLayerRef.current || !libLoaded) return;\n    if (!window.T) return;\n    const T = window.T;\n    const map = mapInstanceRef.current;\n    const layer = typhoonLayerRef.current;\n\n    // 清除旧的图层\n    layer.forEach(overlay => map.removeOverLay(overlay));\n    layer.length = 0;\n    const t = TYPHOON_DATA;\n    const currentPos = t.path[t.currentIdx];\n    const windLevels = [{\n      level: 7,\n      radii: t.windRadii[7],\n      color: '#22c55e',\n      fillColor: '#22c55e',\n      fillOpacity: 0.15\n    }, {\n      level: 10,\n      radii: t.windRadii[10],\n      color: '#eab308',\n      fillColor: '#eab308',\n      fillOpacity: 0.25\n    }, {\n      level: 12,\n      radii: t.windRadii[12],\n      color: '#ef4444',\n      fillColor: '#ef4444',\n      fillOpacity: 0.35\n    }];\n\n    // 绘制风圈\n    windLevels.forEach(w => {\n      const points = generateWindCirclePoints(currentPos, w.radii).map(p => new T.LngLat(p[1], p[0]));\n      const polygon = new T.Polygon(points, {\n        color: w.color,\n        weight: 1.5,\n        fillColor: w.fillColor,\n        fillOpacity: w.fillOpacity\n      });\n      map.addOverLay(polygon);\n      layer.push(polygon);\n    });\n\n    // 绘制已走路径\n    const passedPath = t.path.slice(0, t.currentIdx + 1).map(p => new T.LngLat(p[1], p[0]));\n    const passedLine = new T.Polyline(passedPath, {\n      color: '#f87171',\n      weight: 2,\n      opacity: 0.8\n    });\n    map.addOverLay(passedLine);\n    layer.push(passedLine);\n\n    // 绘制预测路径\n    const futurePath = t.path.slice(t.currentIdx).map(p => new T.LngLat(p[1], p[0]));\n    const futureLine = new T.Polyline(futurePath, {\n      color: '#fbbf24',\n      weight: 2,\n      opacity: 0.7,\n      style: 'dashed'\n    });\n    map.addOverLay(futureLine);\n    layer.push(futureLine);\n\n    // 台风图标（SVG+文本）\n    const svg = `<svg xmlns='http://www.w3.org/2000/svg' width='60' height='80' viewBox='0 0 60 80' style='pointer-events: none;'>\n      <g>\n        <text x='30' y='18' text-anchor='middle' font-size='14' fill='#e16531' font-weight='bold'>台风 ${t.name}</text>\n        <g transform='translate(10,25) scale(0.04)'>\n          <path d=\"M608 42.666667c53.312 0 104.533333 8.896 152.298667 25.258666a466.538667 466.538667 0 0 0-196.608 73.045334l-0.661334 0.426666C798.229333 166.826667 981.333333 366.037333 981.333333 608c0 53.312-8.896 104.533333-25.28 152.298667a466.56 466.56 0 0 0-73.514666-197.333334C857.173333 798.229333 657.962667 981.376 416 981.376c-53.312 0-104.533333-8.896-152.298667-25.28a466.538667 466.538667 0 0 0 196.608-73.045333l0.725334-0.469334C225.792 857.173333 42.666667 657.941333 42.666667 416c0-53.312 8.896-104.533333 25.258666-152.298667a466.56 466.56 0 0 0 73.493334 197.269334C166.826667 225.749333 366.058667 42.666667 608 42.666667zM512 352a160 160 0 1 0 0 320 160 160 0 0 0 0-320z\" fill=\"#e16531\"/>\n        </g>\n      </g>\n    </svg>`;\n    const icon = new T.Icon({\n      iconUrl: \"data:image/svg+xml;charset=utf-8,\" + encodeURIComponent(svg),\n      iconSize: new T.Point(60, 80),\n      iconAnchor: new T.Point(30, 45)\n    });\n    const marker = new T.Marker(new T.LngLat(currentPos[1], currentPos[0]), {\n      icon\n    });\n    map.addOverLay(marker);\n    layer.push(marker);\n  }, [libLoaded, mapReady, mapInstanceRef, typhoonLayerRef]);\n};\n_s4(useTyphoonLayer, \"OD7bBpZva5O2jO+Puf00hKivP7c=\");","map":{"version":3,"names":["useEffect","TILE_SOURCES","generateWindCirclePoints","TYPHOON_DATA","useMapInitialization","libLoaded","mapContainerRef","mapInstanceRef","tileLayerRef","weatherLayerRef","routeLayerRef","markersLayerRef","typhoonLayerRef","playbackLayerRef","importLayerRef","drawingLayerRef","setMapReady","_s","current","T","window","Map","map","centerAndZoom","LngLat","enableDrag","enableScrollWheelZoom","enableDoubleClickZoom","enableKeyboard","enableInertia","enableContinuousZoom","enableAutoResize","style","cursor","pointerEvents","weatherLayer","routeLayer","typhoonLayer","markersLayer","playbackLayer","importLayer","drawingLayer","type","junggarCoords","polygon","Polygon","color","weight","opacity","fillColor","fillOpacity","addOverLay","addEventListener","prev","err","console","error","clearOverLays","useTileLayerSwitch","isOfflineMode","_s2","L","tileLayer","source","OFFLINE","ONLINE","removeLayer","newTileLayer","url","attribution","maxZoom","addTo","bringToBack","useWeatherLayer","weatherData","showWeather","_s3","layer","forEach","marker","removeOverLay","length","w","windSpeed","weatherIconSvg","html","windDir","icon","Icon","iconUrl","encodeURIComponent","iconSize","Point","iconAnchor","Marker","lon","lat","push","useTyphoonLayer","mapReady","_s4","overlay","t","currentPos","path","currentIdx","windLevels","level","radii","windRadii","points","p","passedPath","slice","passedLine","Polyline","futurePath","futureLine","svg","name"],"sources":["C:/Users/10211/Desktop/AI Files/oceanEye/src/utils/mapHooks.js"],"sourcesContent":["import { useEffect } from 'react';\r\nimport { TILE_SOURCES, generateWindCirclePoints } from './mapUtils';\r\nimport { TYPHOON_DATA } from './dataGenerator';\r\n\r\nexport const useMapInitialization = (\r\n  libLoaded,\r\n  mapContainerRef,\r\n  mapInstanceRef,\r\n  tileLayerRef,\r\n  weatherLayerRef,\r\n  routeLayerRef,\r\n  markersLayerRef,\r\n  typhoonLayerRef,\r\n  playbackLayerRef,\r\n  importLayerRef,\r\n  drawingLayerRef,\r\n  setMapReady\r\n) => {\r\n  useEffect(() => {\r\n    if (!libLoaded || !mapContainerRef.current) return;\r\n    if (mapInstanceRef.current) return;\r\n\r\n    const T = window.T;\r\n    if (!T || typeof T.Map !== 'function') return;\r\n\r\n    try {\r\n        // 创建天地图实例\r\n        const map = new T.Map(mapContainerRef.current);\r\n        map.centerAndZoom(new T.LngLat(105, 35), 4);\r\n        \r\n        // 启用所有交互功能\r\n        map.enableDrag();\r\n        map.enableScrollWheelZoom();\r\n        map.enableDoubleClickZoom();\r\n        map.enableKeyboard();\r\n        map.enableInertia();\r\n        map.enableContinuousZoom();\r\n        map.enableAutoResize();\r\n        \r\n        // 确保地图容器可以接收鼠标事件\r\n        if (mapContainerRef.current) {\r\n          mapContainerRef.current.style.cursor = 'grab';\r\n          mapContainerRef.current.style.pointerEvents = 'auto';\r\n        }\r\n\r\n        // 创建图层对象（用数组模拟图层组）\r\n        const weatherLayer = [];\r\n        const routeLayer = [];\r\n        const typhoonLayer = [];\r\n        const markersLayer = [];\r\n        const playbackLayer = [];\r\n        const importLayer = [];\r\n        const drawingLayer = [];\r\n        \r\n        weatherLayerRef.current = weatherLayer;\r\n        routeLayerRef.current = routeLayer;\r\n        markersLayerRef.current = markersLayer;\r\n        typhoonLayerRef.current = typhoonLayer;\r\n        playbackLayerRef.current = playbackLayer;\r\n        importLayerRef.current = importLayer;\r\n        drawingLayerRef.current = drawingLayer;\r\n        \r\n        tileLayerRef.current = { type: 'tianditu', map };\r\n        mapInstanceRef.current = map;\r\n\r\n        // 准格尔盆地\r\n        const junggarCoords = [\r\n            new T.LngLat(87.5, 48.2), new T.LngLat(89.0, 47.8), new T.LngLat(90.2, 47.0), \r\n            new T.LngLat(90.8, 46.0), new T.LngLat(91.0, 45.0), new T.LngLat(90.0, 44.2), \r\n            new T.LngLat(88.5, 43.8), new T.LngLat(87.0, 43.5), new T.LngLat(85.5, 43.8), \r\n            new T.LngLat(84.0, 44.5), new T.LngLat(83.0, 45.5), new T.LngLat(83.5, 46.5), \r\n            new T.LngLat(84.8, 47.2), new T.LngLat(86.0, 47.8)\r\n        ];\r\n        const polygon = new T.Polygon(junggarCoords, {\r\n            color: '#fbbf24',\r\n            weight: 2,\r\n            opacity: 0.8,\r\n            fillColor: '#fbbf24',\r\n            fillOpacity: 0.15\r\n        });\r\n        map.addOverLay(polygon);\r\n\r\n        // 监听地图移动事件\r\n        map.addEventListener('moveend', () => setMapReady(prev => !prev));\r\n        setMapReady(true);\r\n    } catch (err) {\r\n        console.error(\"Map initialization failed\", err);\r\n    }\r\n\r\n    return () => { \r\n        if (mapInstanceRef.current) {\r\n            mapInstanceRef.current.clearOverLays();\r\n            mapInstanceRef.current = null; \r\n        }\r\n    };\r\n  }, [libLoaded]);\r\n};\r\n\r\nexport const useTileLayerSwitch = (mapInstanceRef, tileLayerRef, isOfflineMode, libLoaded) => {\r\n  useEffect(() => {\r\n      if (!mapInstanceRef.current || !tileLayerRef.current || !libLoaded) return;\r\n      if (!window.L || typeof window.L.tileLayer !== 'function') return;\r\n\r\n      const L = window.L; \r\n      const map = mapInstanceRef.current;\r\n      const source = isOfflineMode ? TILE_SOURCES.OFFLINE : TILE_SOURCES.ONLINE;\r\n      \r\n      if (tileLayerRef.current) {\r\n         map.removeLayer(tileLayerRef.current);\r\n      }\r\n      \r\n      const newTileLayer = L.tileLayer(source.url, { \r\n        attribution: source.attribution, \r\n        maxZoom: 19 \r\n      }).addTo(map);\r\n      newTileLayer.bringToBack();\r\n      tileLayerRef.current = newTileLayer;\r\n  }, [isOfflineMode, libLoaded]);\r\n};\r\n\r\nexport const useWeatherLayer = (mapInstanceRef, weatherLayerRef, weatherData, showWeather, libLoaded) => {\r\n  useEffect(() => {\r\n    if (!mapInstanceRef.current || !weatherLayerRef.current || !libLoaded) return;\r\n    if (!window.T) return;\r\n\r\n    const T = window.T;\r\n    const map = mapInstanceRef.current;\r\n    const layer = weatherLayerRef.current;\r\n    \r\n    // 清除旧的图层\r\n    layer.forEach(marker => map.removeOverLay(marker));\r\n    layer.length = 0;\r\n    \r\n    if (!showWeather) return;\r\n\r\n    weatherData.forEach(w => {\r\n        let color = '#a3e635'; \r\n        if (w.windSpeed >= 15) color = '#facc15'; \r\n        if (w.windSpeed >= 25) color = '#f87171';\r\n        \r\n        let weatherIconSvg = w.type === 'Clear' \r\n          ? `<circle cx=\"12\" cy=\"12\" r=\"6\" fill=\"${color}\" fill-opacity=\"0.2\" stroke=\"${color}\" stroke-width=\"2\"/>` \r\n          : `<path d=\"M17.5 19c0-1.7-1.3-3-3-3h-11c-1.7 0-3 1.3-3 3s1.3 3 3 3h11c1.7 0 3-1.3 3-3z\" fill=\"${color}\" fill-opacity=\"0.4\"/>`;\r\n        \r\n        const html = `<div class=\"relative w-10 h-10 flex items-center justify-center\"><div style=\"transform: rotate(${w.windDir}deg); transform-origin: center;\" class=\"absolute inset-0 flex items-center justify-center opacity-60\"><svg width=\"40\" height=\"40\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"${color}\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><line x1=\"12\" y1=\"19\" x2=\"12\" y2=\"5\"></line><polyline points=\"5 12 12 5 19 12\"></polyline></svg></div><div class=\"absolute bottom-0 right-0 bg-slate-900/80 text-[8px] px-1 rounded text-white font-mono\">${w.windSpeed}</div><div class=\"absolute top-0 left-0 w-4 h-4\"><svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">${weatherIconSvg}</svg></div></div>`;\r\n        \r\n        const icon = new T.Icon({\r\n            iconUrl: \"data:image/svg+xml;charset=utf-8,\" + encodeURIComponent(`<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"40\" height=\"40\"><foreignObject width=\"40\" height=\"40\">${html}</foreignObject></svg>`),\r\n            iconSize: new T.Point(40, 40),\r\n            iconAnchor: new T.Point(20, 20)\r\n        });\r\n        \r\n        const marker = new T.Marker(new T.LngLat(w.lon, w.lat), { icon });\r\n        map.addOverLay(marker);\r\n        layer.push(marker);\r\n    });\r\n  }, [libLoaded, weatherData, showWeather]);\r\n};\r\n\r\nexport const useTyphoonLayer = (mapInstanceRef, typhoonLayerRef, mapReady, libLoaded) => {\r\n  useEffect(() => {\r\n    if (!mapInstanceRef.current || !typhoonLayerRef.current || !libLoaded) return;\r\n    if (!window.T) return;\r\n\r\n    const T = window.T;\r\n    const map = mapInstanceRef.current;\r\n    const layer = typhoonLayerRef.current;\r\n    \r\n    // 清除旧的图层\r\n    layer.forEach(overlay => map.removeOverLay(overlay));\r\n    layer.length = 0;\r\n    \r\n    const t = TYPHOON_DATA; \r\n    const currentPos = t.path[t.currentIdx];\r\n\r\n    const windLevels = [\r\n        { level: 7, radii: t.windRadii[7], color: '#22c55e', fillColor: '#22c55e', fillOpacity: 0.15 },\r\n        { level: 10, radii: t.windRadii[10], color: '#eab308', fillColor: '#eab308', fillOpacity: 0.25 },\r\n        { level: 12, radii: t.windRadii[12], color: '#ef4444', fillColor: '#ef4444', fillOpacity: 0.35 }\r\n    ];\r\n    \r\n    // 绘制风圈\r\n    windLevels.forEach(w => {\r\n      const points = generateWindCirclePoints(currentPos, w.radii).map(p => new T.LngLat(p[1], p[0]));\r\n      const polygon = new T.Polygon(points, { \r\n        color: w.color, \r\n        weight: 1.5, \r\n        fillColor: w.fillColor, \r\n        fillOpacity: w.fillOpacity \r\n      });\r\n      map.addOverLay(polygon);\r\n      layer.push(polygon);\r\n    });\r\n    \r\n    // 绘制已走路径\r\n    const passedPath = t.path.slice(0, t.currentIdx + 1).map(p => new T.LngLat(p[1], p[0]));\r\n    const passedLine = new T.Polyline(passedPath, { \r\n      color: '#f87171', \r\n      weight: 2, \r\n      opacity: 0.8 \r\n    });\r\n    map.addOverLay(passedLine);\r\n    layer.push(passedLine);\r\n    \r\n    // 绘制预测路径\r\n    const futurePath = t.path.slice(t.currentIdx).map(p => new T.LngLat(p[1], p[0]));\r\n    const futureLine = new T.Polyline(futurePath, { \r\n      color: '#fbbf24', \r\n      weight: 2, \r\n      opacity: 0.7,\r\n      style: 'dashed'\r\n    });\r\n    map.addOverLay(futureLine);\r\n    layer.push(futureLine);\r\n    \r\n    // 台风图标（SVG+文本）\r\n    const svg = `<svg xmlns='http://www.w3.org/2000/svg' width='60' height='80' viewBox='0 0 60 80' style='pointer-events: none;'>\r\n      <g>\r\n        <text x='30' y='18' text-anchor='middle' font-size='14' fill='#e16531' font-weight='bold'>台风 ${t.name}</text>\r\n        <g transform='translate(10,25) scale(0.04)'>\r\n          <path d=\"M608 42.666667c53.312 0 104.533333 8.896 152.298667 25.258666a466.538667 466.538667 0 0 0-196.608 73.045334l-0.661334 0.426666C798.229333 166.826667 981.333333 366.037333 981.333333 608c0 53.312-8.896 104.533333-25.28 152.298667a466.56 466.56 0 0 0-73.514666-197.333334C857.173333 798.229333 657.962667 981.376 416 981.376c-53.312 0-104.533333-8.896-152.298667-25.28a466.538667 466.538667 0 0 0 196.608-73.045333l0.725334-0.469334C225.792 857.173333 42.666667 657.941333 42.666667 416c0-53.312 8.896-104.533333 25.258666-152.298667a466.56 466.56 0 0 0 73.493334 197.269334C166.826667 225.749333 366.058667 42.666667 608 42.666667zM512 352a160 160 0 1 0 0 320 160 160 0 0 0 0-320z\" fill=\"#e16531\"/>\r\n        </g>\r\n      </g>\r\n    </svg>`;\r\n    const icon = new T.Icon({\r\n      iconUrl: \"data:image/svg+xml;charset=utf-8,\" + encodeURIComponent(svg),\r\n      iconSize: new T.Point(60, 80),\r\n      iconAnchor: new T.Point(30, 45)\r\n    });\r\n    const marker = new T.Marker(new T.LngLat(currentPos[1], currentPos[0]), { icon });\r\n    map.addOverLay(marker);\r\n    layer.push(marker);\r\n  }, [libLoaded, mapReady, mapInstanceRef, typhoonLayerRef]);\r\n};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}